<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Haven&Her ‚Äì Support</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>:root {
  --bg: #f0f8ff;
  --text-main: #1e3a4c;
  --text-sub: #4f6b7a;
  --card-bg: #ffffff;
  --accent: #8ecae6;
  --border-soft: #d6ecf5;
}

/* Base */
body {
  margin: 0;
  min-height: 100vh;
  font-family: 'Inter', sans-serif;
  background: var(--bg);
  color: var(--text-main);

  display: flex;
  flex-direction: column;
}


/* Navbar */
.navbar {
  height: 70px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 40px;
  background: rgba(240, 248, 255, 0.85);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(0,0,0,0.05);
}

.logo {
  font-family: 'Playfair Display', serif;
  font-size: 26px;
}

.profile img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid var(--border-soft);
}

/* Layout */
.container {
  flex: 1;
  max-width: 1200px;
  width: 100%;
  margin: 0 auto;
  padding: 60px 40px; /* breathing top & bottom */
  display: grid;
  grid-template-columns: 1.1fr 0.9fr;
  gap: 50px;
  align-items: center;
}


/* Left Panel */
.left-panel {
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.left-panel h1 {
  font-family: 'Playfair Display', serif;
  font-size: 42px;
  margin-bottom: 24px;
}

.subtitle {
  font-size: 18px;
  color: var(--text-sub);
  line-height: 1.6;
  margin-bottom: 16px;
}

.divider {
  width: 80px;
  height: 3px;
  background: var(--accent);
  opacity: 0.6;
  margin: 28px 0;
}

.soft-note {
  font-size: 15px;
  color: var(--text-sub);
}

/* Right Panel */
.right-panel {
  position: relative;
}

/* Cards Grid */
.cards-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  align-content: center;
  align-items: start;
}


/* Card */
.card {
  background: var(--card-bg);
  border: 1px solid var(--border-soft);
  border-radius: 18px;
  padding: 20px;
  cursor: pointer;
  transition: all 0.25s ease;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  height: auto;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 14px 30px rgba(142, 202, 230, 0.25);
}

.card-banner {
  height: 60px;
  background: linear-gradient(135deg, #e0f2ff, #f0f8ff);
  border-radius: 12px;
  margin-bottom: 18px;
}

.card h3 {
  font-size: 18px;
  margin-bottom: 8px;
}

.card p {
  font-size: 14px;
  color: var(--text-sub);
}
.card img {
  width: 100%;
  height: 110px;      /* CONTROL THE HEIGHT HERE */
  object-fit: cover;  /* Crop nicely instead of stretching */
  display: block;
}


/* Expanded */
.expanded-content {
  position: absolute;
  inset: 0;
  border-radius: 24px;
  overflow: hidden;
  border: 1px solid var(--border-soft);
  box-shadow: 0 20px 40px rgba(142, 202, 230, 0.2);

  opacity: 0;
  transform: translateY(20px);
  transition: all 0.35s ease;
  pointer-events: none;
}

.expanded-content.active {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}


.expanded-content::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(6px);
  border-radius: 24px;
  z-index: 0;
}

.expanded-content > * {
  position: relative;
  z-index: 1;
}
.expanded-bg {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  filter: blur(1.5px);
  opacity: 0.35;

  z-index: 1;
}
.expanded-inner {
  position: relative;
  z-index: 2;
  padding: 40px;
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(6px);
  height: 100%;
  overflow-y: auto;
  box-sizing: border-box;
}

.profile-container {
  position: relative;
  cursor: pointer;
}

.profile-circle {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: var(--accent);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 18px;
  text-transform: uppercase;
}

.profile-dropdown {
  position: absolute;
  top: 55px;
  right: 0;
  background: white;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.08);
  padding: 10px;
  display: none;
}

.profile-dropdown button {
  background: none;
  border: none;
  padding: 8px 16px;
  cursor: pointer;
  width: 100%;
  text-align: left;
  font-size: 14px;
}

.profile-dropdown button:hover {
  background: #f0f8ff;
}
.respond-section {
  margin-bottom: 28px;
}

.section-title {
  font-size: 16px;
  font-weight: 500;
  margin-bottom: 12px;
  color: var(--text-main);
}

.principle-list {
  padding-left: 18px;
  color: var(--text-sub);
  line-height: 1.6;
}

textarea {
  width: 100%;
  min-height: 44px;
  max-height: 160px;
  padding: 12px 16px;
  border-radius: 16px;
  border: 1px solid var(--border-soft);
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  background: rgba(255,255,255,0.95);
  resize: none;
  outline: none;
  overflow: hidden;
  transition: border 0.2s ease;
}


textarea:focus {
  border-color: var(--accent);
}

.ai-soft-btn {
  margin-top: 12px;
  padding: 10px 18px;
  border-radius: 18px;
  border: none;
  background: var(--accent);
  color: white;
  cursor: pointer;
  font-size: 14px;
  transition: opacity 0.2s ease;
}

.ai-soft-btn:hover {
  opacity: 0.85;
}

.ai-response {
  margin-top: 16px;
  padding: 20px;
  border-radius: 18px;
  background: rgba(142, 202, 230, 0.15);
  line-height: 1.6;
  font-size: 15px;
  color: var(--text-main);

  min-height: 80px;
  width: 100%;
  box-sizing: border-box;
}




.back-btn {
  background: none;
  border: none;
  color: var(--accent);
  font-size: 14px;
  cursor: pointer;
  margin-bottom: 20px;
}
</style>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Inter:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">Haven&Her</div>
    <div class="profile-container">
    <div class="profile-circle" id="profileCircle"></div>
    <div class="profile-dropdown" id="profileDropdown">
      <button onclick="logout()">Logout</button>
    </div>
</div>

  </nav>

  <!-- Main Layout -->
  <div class="container">

    <!-- LEFT PANEL -->
    <aside class="left-panel">
      <h1>You don‚Äôt have to guess how to respond.</h1>

      <p class="subtitle">
        Supporting someone through hormonal change
        can feel confusing at times.
      </p>

      <p class="subtitle">
        This space helps you pause,
        understand,
        and respond with care.
      </p>

      <div class="divider"></div>

      <p class="soft-note">
        You don‚Äôt need perfect words.
        You just need awareness.
      </p>
    </aside>

    <!-- RIGHT PANEL -->
    <main class="right-panel">

      <div class="cards-grid" id="cardsGrid">

        <div class="card" onclick="expandCard('respond', 'How to respond.png')">
        <img src="How to respond.png" alt="Respond">
            <div class="card-content">
            <h3>How to Respond</h3>
            <p>Guidance for difficult moments.</p>
            </div>
        </div>

        <div class="card" onclick="expandCard('understand', 'Understand Whats Happening.png')">
        <img src="Understand Whats Happening.png" alt="Understand">
            <div class="card-content">
            <h3>Understand What‚Äôs Happening</h3>
            <p>Clarity behind emotional shifts.</p>
            </div>
        </div>

        <div class="card" onclick="expandCard('avoid', 'What to avoid.png')">
        <img src="What to avoid.png" alt="Avoid">
            <div class="card-content">
            <h3>What to Avoid</h3>
            <p>Language that may unintentionally hurt.</p>
            </div>
        </div>

        <div class="card" onclick="expandCard('medical', 'Medical Alerts.png')">
        <img src="Medical Alerts.png" alt="Medical">
            <div class="card-content">
            <h3>Medical Alerts</h3>
            <p>Recognize serious warning signs.</p>
            </div>
        </div>


      </div>

      <!-- Expanded Content -->
        <div class="expanded-content" id="expandedContent">

  <div class="expanded-bg" id="expandedBg"></div>

  <div class="expanded-inner">
    <button class="back-btn" onclick="collapseCard()">‚Üê Back</button>
    <div id="expandedBody"></div>
  </div>

</div>
</main>
  </div>

<script type="module">
  import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";
   import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } 
  from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
  const genAI = new GoogleGenerativeAI("AIzaSyC_QMze2rwPX4WdlgGhcTHNYIOiUusQgdI");
const model = genAI.getGenerativeModel({ model: "gemini-2.5-flash" });




const contentData = {
  respond: `
  <h2>How to Respond</h2>

  <!-- Section 1 -->
  <div class="respond-section">
    <h4 class="section-title">Before you respond</h4>
    <ul class="principle-list">
      <li>Stay calm and steady.</li>
      <li>Lower your tone, not your concern.</li>
      <li>Avoid correcting immediately.</li>
    </ul>
  </div>

  <!-- Section 2 -->
  <div class="respond-section">
    <h4 class="section-title">What feels difficult right now?</h4>
    <textarea id="situationInput"
      placeholder="Describe what‚Äôs happening..."></textarea>

    <button id="aiBtn" class="ai-soft-btn">
      Get a supportive response
    </button>
  </div>

  <!-- Section 3 -->
  <div class="respond-section">
    <div id="aiResponse" class="ai-response"></div>
  </div>
`,


  understand: `
    <h2>Understand What‚Äôs Happening</h2>
    <p>Hormonal shifts can affect mood, sleep, and energy levels.</p>
  `,

  avoid: `
    <h2>What to Avoid</h2>
    <p>Dismissive language can increase emotional stress.</p>
  `,

  medical: `
    <h2>Medical Alerts</h2>
    <p>Chest discomfort, severe dizziness, or heavy bleeding require medical attention.</p>
  `
};


function expandCard(type, imageSrc) {
  const expanded = document.getElementById("expandedContent");
  const body = document.getElementById("expandedBody");
  const bg = document.getElementById("expandedBg");

  body.innerHTML = contentData[type];

  bg.style.backgroundImage = `url('${imageSrc}')`;

  expanded.classList.add("active");

  document.getElementById("cardsGrid").style.opacity = "0.2";
  document.getElementById("cardsGrid").style.pointerEvents = "none";
}


function collapseCard() {
  const expanded = document.getElementById("expandedContent");
  const bg = document.getElementById("expandedBg");

  expanded.classList.remove("active");
  bg.style.backgroundImage = "";

  document.getElementById("cardsGrid").style.opacity = "1";
  document.getElementById("cardsGrid").style.pointerEvents = "auto";
}
window.expandCard = expandCard;
window.collapseCard = collapseCard;

document.addEventListener("click", async function (e) {
  if (e.target && e.target.id === "aiBtn") {
    const input = document.getElementById("situationInput").value;
    const output = document.getElementById("aiResponse");

    if (!input.trim()) {
      output.innerHTML = "Please describe the situation first.";
      return;
    }

    output.innerHTML = "Thinking‚Ä¶";

    try {
      const relation = localStorage.getItem("relation") || "family member";
const ageGroup = localStorage.getItem("ageGroup") || "adult";

let toneContext = "";
let stageContext = "";

if (relation === "partner") {
  toneContext = "Use a close, emotionally supportive tone appropriate for a romantic partner.";
} 
else if (relation === "daughter" || relation === "son") {
  toneContext = "Use a respectful and patient tone appropriate for a child supporting a mother.";
}
else if (relation === "sister") {
  toneContext = "Use a familiar but caring tone between siblings.";
}
else {
  toneContext = "Use a calm and supportive tone appropriate for a family member.";
}

// Age-based stage awareness
if (ageGroup === "13-19") {
  stageContext = "Consider that this may involve early menstrual cycles, puberty changes, or emotional sensitivity during adolescence.";
}
else if (ageGroup === "20-35") {
  stageContext = "Consider reproductive health stress, PMS, work-life pressure, or cycle-related mood shifts.";
}
else if (ageGroup === "35-45") {
  stageContext = "Consider hormonal shifts, stress load, and possible early perimenopausal patterns.";
}
else if (ageGroup === "45-55") {
  stageContext = "Consider perimenopause or menopausal transitions affecting mood and energy.";
}
else if (ageGroup === "55+") {
  stageContext = "Consider post-menopausal emotional or physical adjustments.";
}
const result = await model.generateContent(`
You are inside a women's health support app.

The user is a ${relation}.
The woman is in the age group: ${ageGroup}.

Adapt naturally to that relationship.
Do not sound clinical.
Do not over-explain.

Give:

1. One confident sentence they can actually say.
2. One short tone reminder (1 line).
3. One short phrase to avoid.

Keep it under 90 words total.
Make it feel real, not like a therapist.

Situation:
${input}
`);



const text = result.response.text();
output.innerHTML = text.replace(/\n/g, "<br><br>");


// Convert markdown bold (**text**) to HTML bold
const formatted = text
  .replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>")
  .replace(/\n/g, "<br>");

output.innerHTML = formatted;




    } catch (err) {
      console.error(err);
      output.innerHTML = "Could not generate a response.";
    }
  }
});
document.addEventListener("keydown", function (e) {
  const textarea = document.getElementById("situationInput");

  if (!textarea) return;

  if (e.target === textarea && e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    document.getElementById("aiBtn").click();
  }
});
document.addEventListener("input", function (e) {
  if (e.target && e.target.id === "situationInput") {
    e.target.style.height = "auto";
    e.target.style.height = e.target.scrollHeight + "px";
  }
});


const listModels = async () => {
  try {
    const response = await fetch(
      "https://generativelanguage.googleapis.com/v1beta/models?key=AIzaSyCge8p8FALtKKJRt8Bk4U-nz9_u9oPlw9k"
    );
    const data = await response.json();
    console.log("Available models:", data);
  } catch (err) {
    console.error(err);
  }
};

listModels();

 

const firebaseConfig = {
  apiKey: "AIzaSyBXEUA6m10uR0-pTV4IewWmUxTVU-_8cfs",
  authDomain: "h-h-v1.firebaseapp.com",
  projectId: "h-h-v1",
  storageBucket: "h-h-v1.firebasestorage.app",
  messagingSenderId: "786859596243",
  appId: "1:786859596243:web:f0918769de98fda7f43726",
  measurementId: "G-LGTXYGKNFH"
};

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const profileCircle = document.getElementById("profileCircle");
const profileDropdown = document.getElementById("profileDropdown");


  // üîí Protect Page
onAuthStateChanged(auth, (user) => {
  if (!user) {
    window.location.href = "login.html";
    return;
  }

  const mode = localStorage.getItem("mode");
  const relation = localStorage.getItem("relation");
  const ageGroup = localStorage.getItem("ageGroup");

  // If setup incomplete
  if (!mode || !ageGroup) {
    window.location.href = "setup.html";
    return;
  }

  // If user selected "For Me", redirect properly
  if (mode !== "support") {
    if (ageGroup === "teen") {
      window.location.href = "for-me-teenage.html";
    } else if (ageGroup === "adult") {
      window.location.href = "for-me-adult.html";
    } else if (ageGroup === "midlife") {
      window.location.href = "for-me-menopause.html";
    }
    return;
  }
  // Profile circle
  const name = user.displayName || user.email;
  profileCircle.textContent = name.charAt(0).toUpperCase();
});

// üö™ Logout Function
window.logout = function() {
  signOut(auth).then(() => {
    window.location.href = "index.html";  // üëà go to index now
  });
};


if (profileCircle && profileDropdown) {
  profileCircle.addEventListener("click", () => {
    profileDropdown.style.display =
      profileDropdown.style.display === "block" ? "none" : "block";
  });
}


// Close dropdown when clicking outside
window.addEventListener("click", (e) => {
  if (profileDropdown && !e.target.closest(".profile-container")) {
    profileDropdown.style.display = "none";
  }
});





</script>

</body>
</html>



